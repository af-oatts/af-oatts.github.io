---
interface Step {
  title: string;
  img: string;
  alt: string;
  body?: string;
}

type Props = {
    os: string
}

const {os} = Astro.props;

const osLabel = {
  windows: "Windows",
  macos_arm: "macOS (Apple Silicon)",
  macos_intel: "macOS (Intel)",
  linux: "Linux"
}[os] ?? os;
let retryUrl = '';



const steps: Step[] = [];
---

<section class="container my-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10 col-xxl-9">
      <div class="card shadow-sm border-0 overflow-hidden">
        <div class="card-body p-4 p-md-5">
          <h1 class="h3 mb-2">Thanks for downloading OATTS for {osLabel}!</h1>
          <p class="text-body-secondary mb-3">
            Your download should start automatically. If not, you can retry below.
          </p>
          <a href={retryUrl} class="btn btn-outline-primary btn-sm">
            Retry Download
          </a>
        </div>

        <div class="border-top"></div>

        <div class="card-body p-4 p-md-5">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <h2 class="h5 mb-0">How to install on {osLabel}</h2>
            <a
              class="btn btn-outline-secondary btn-sm"
              data-bs-toggle="collapse"
              href="#installAccordion"
              role="button"
              aria-expanded="true"
              aria-controls="installAccordion"
            >
              Show / Hide steps
            </a>
          </div>

          <div class="collapse show" id="installAccordion">
            <ol class="list-unstyled">
              {steps.map((step, i) => (
                <li class="mb-4" data-step={i + 1}>
                  <div class="row g-3 g-md-4 align-items-center">
                    <div class="col-12 col-md-6">
                      <div class="ratio ratio-16x9 rounded border overflow-hidden bg-body-tertiary">
                        <img
                          src={step.img}
                          alt={step.alt}
                          loading="lazy"
                          class="w-100 h-100 object-fit-cover"
                        />
                      </div>
                    </div>
                    <div class="col-12 col-md-6">
                      <div class="d-flex align-items-start gap-3">
                        <div class="flex-shrink-0">
                          <span class="badge text-bg-secondary rounded-pill">{i + 1}</span>
                        </div>
                        <div>
                          <h3 class="h6 mb-2">{step.title}</h3>
                          {step.body && <p class="mb-0">{step.body}</p>}
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
              ))}
            </ol>
          </div>

          <div class="d-flex flex-wrap gap-2 mt-4">
            <a href={retryUrl} class="btn btn-primary btn-sm">Download again</a>
            <a href="/note-to-it" class="btn btn-outline-secondary btn-sm">For IT Teams</a>
            <a href="https://github.com/af-oatts/oatts/issues/new" class="btn btn-outline-secondary btn-sm">Report Issue</a>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>
